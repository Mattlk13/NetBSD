To: port-arm%netbsd.org@localhost
Subject: apple m1 status update (20220924)

Install:
 https://wiki.netbsd.org/ports/evbarm/apple/

Topics:
- X
 startx failed
 Backtrace:
[   461.163] ioctl FBIOGETCMAP: Invalid argument
[   461.163] ioctl FBIOPUTCMAP: Invalid argument
[   461.163] (EE) 
[   461.163] (EE) Backtrace:
[   461.195] (EE) 0: /usr/X11R7/bin/X (xorg_backtrace+0x3c) [0xa423c8c]
[   461.195] (EE) 1: /usr/X11R7/bin/X (os_move_fd+0x78) [0xa41e5f8]
[   461.195] (EE) 2: /usr/lib/libc.so.12 (__sigtramp_siginfo_2+0x0) [0xfe9f99dcd488]
[   461.195] (EE) 
[   461.195] (EE) Bus error at address 0xc3c3c3c3c2c2c2c2
[   461.195] (EE) 
Fatal server error:
[   461.195] (EE) Caught signal 10 (Bus error). Server aborting
 
 startx -- -depth 30
 http://mail-index.netbsd.org/port-arm/2021/10/21/msg007458.html
 https://twitter.com/ebijun/status/1480042814704873473

Hardware:
 Apple Mac mini M1 2020 A2348 
 USB SSD 512GB BUFFALO SSD-PGM2.0U3-BC

Filesystem   1M-blocks      Used     Avail %Cap Mounted on
/dev/dk6        480587    289787    166770  63% /
/dev/dk5            79        34        44  43% /boot
ptyfs                0         0         0 100% /dev/pts
procfs               0         0         0 100% /proc
tmpfs             1913         0      1913   0% /var/shm

ToDo:
- audio
- Wireless LAN

pkgsrc:
- pkgsrc packages:
 http://cdn.netbsd.org/pub/NetBSD/misc/jun/aarch64/aarch64/2022/
  pkgin support

System Updates:

sysinfo:
 NetBSD-9.99.100 netpgp-3.99.18 sh-20220122-20220922210046Z
 userland-NetBSD-9.99.100/evbarm

pkgsrc:
 SDL-1.2.15nb40 SDL2-2.24.0nb2 SDL2_mixer-2.0.4nb11 SDL_mixer-1.2.12nb7
 babl-0.1.96 boehm-gc-8.2.2 curl-7.85.0 deforaos-libdatabase-0.1.0
 exiv2-0.27.5nb1 ffmpeg4-4.4.2nb4 ffmpeg5-5.1.1nb1 firefox-104.0.2nb1
 firefox-l10n-104.0.2 flac-1.4.0 fluidsynth-2.2.9 freerdp2-2.3.2nb7
 gawk-5.2.0 gdk-pixbuf2-2.42.9 gegl-0.4.38nb2 gexiv2-0.14.0nb1
 ghc-9.2.1nb3 git-base-2.37.3 gnupg2-2.2.37 gst-plugins1-good-1.20.3nb2
 hs-attoparsec-0.14.4nb2 hs-base-compat-0.12.2
 hs-base-compat-batteries-0.12.2 hs-fail-4.9.0.0nb4 hs-hashable-1.4.1.0
 hs-integer-logarithms-1.0.3.1nb5 hs-primitive-0.7.4.0
 hs-scientific-0.3.7.0nb2 hs-th-abstraction-0.4.4.0 hunspell-1.7.1
 ladspa-1.17nb2 lame-3.100nb4 libXaw3d-1.6.4 libatomic_ops-7.6.14
 libheif-1.13.0 libmikmod-3.3.11.1nb11 libreoffice-7.4.1.2
 libsamplerate-0.2.2nb2 libsndfile-1.1.0nb2 libtasn1-4.19.0
 libxslt-1.1.34nb10 lintpkgsrc-2022.09.14 mate-1.24.1nb3
 mate-settings-daemon-1.24.2nb6 mate-terminal-1.26.0 meson-0.63.2
 mlterm-3.9.2nb6 mplayer-share-1.5nb2 mpv-0.34.1nb10
 neon-0.32.4 netpbm-10.86.34 nginx-1.22.0nb6 ninja-build-1.11.1
 nono-0.4.3 nspr-4.35 nss-3.83 openal-soft-1.22.2nb1
 p5-Finance-Quote-1.49nb2 p5-HTML-Parser-3.78 p5-HTTP-Message-6.37
 pcre2-10.40nb1 pcsc-lite-1.9.9 pinentry-1.2.1 pkgin-22.9.0
 poppler-22.09.0 poppler-cpp-22.09.0 poppler-glib-22.09.0
 pulseaudio-16.1nb1 py310-OpenSSL-22.0.0 py310-cElementTree-3.10.7
 py310-charset-normalizer-2.1.1 py310-cryptography-38.0.1
 py310-expat-3.10.7 py310-imagesize-1.4.1 py310-readline-3.10.7
 py310-sqlite3-3.10.7nb22 python310-3.10.7 python37-3.7.14
 python38-3.8.14 python39-3.9.14 qmmp-1.5.1nb9 qt5-qtbase-5.15.6
 qt5-qtdeclarative-5.15.6 qt5-qtlocation-5.15.6 qt5-qtmultimedia-5.15.6
 qt5-qtsensors-5.15.6 qt5-qtserialport-5.15.6 qt5-qtsvg-5.15.6
 qt5-qttools-5.15.6 qt5-qtwebchannel-5.15.6 qt5-qtwebsockets-5.15.6
 qt5-qtx11extras-5.15.6 qt5-qtxmlpatterns-5.15.6 rsync-3.2.6
 ruby27-addressable-2.8.1 ruby27-cairo-1.17.8 ruby27-hashie-4.1.0
 ruby27-native-package-installer-1.1.5 ruby27-oauth-1.1.0
 ruby27-oauth-tty-1.0.3 ruby27-public_suffix-5.0.0 ruby27-snaky_hash-2.0.0
 ruby27-unf_ext-0.0.8.2 ruby27-version_gem-1.1.0 rust-1.62.1
 samba-4.16.5 seamonkey-2.53.13nb1 seamonkey-l10n-2.53.13
 sqlite3-3.39.3 tex-amsmath-2.17n tex-babel-3.79 tex-colortbl-1.0f
 tex-fancyvrb-4.5 tex-firstaid-1.0r tex-graphics-1.4e
 tex-hypdoc-1.17 tex-hyperref-7.00s tex-kvoptions-3.15
 tex-l3backend-2022 tex-l3kernel-2022 tex-l3packages-2022
 tex-latex-20220601.5nb1 tex-rerunfilecheck-1.10 tex-tools-2022
 vala-0.56.3 vorbis-tools-1.4.2nb4 vte3-0.68.0nb7
 xfce4-4.16.0nb7 xfce4-session-4.16.0nb5 xnp2-0.86nb16

Version: 
 NetBSD 9.99.100 (GENERIC64) #0: Thu Sep 22 21:00:46 UTC 2022  mkrepro@mkrepro.NetBSD.org:/usr/src/sys/arch/evbarm/compile/GENERIC64

dmesg:
 https://github.com/ebijun/NetBSD/blob/master/dmesg/aarch64/Apple_Mac_mini_M1_2020

sysinfo:
 https://github.com/ebijun/NetBSD/blob/master/apple-m1/sysinfo

pkginfo:
 https://github.com/ebijun/NetBSD/blob/master/apple-m1/pkginfo

pkgchk.conf:
 https://github.com/ebijun/NetBSD/blob/master/apple-m1/pkgchk.conf
  cp pkgchk.conf /usr/pkgsrc;pkg_add pkg_chk; pkg_chk -au

--
Jun Ebihara
