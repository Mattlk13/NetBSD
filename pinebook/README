To: port-arm%netbsd.org@localhost
Subject: pinebook status update (20210623)

Topics:
- /usr/bin/aiomixer
 graphical mixer for NetBSD audio.

on pinebook:
 Select a mixer device:
 [*] /dev/mixer0: sun50i-a64-audi  ausoc
 [ ] /dev/mixer1: hdmi-audio  ausoc

on pinebook pro:
XXX: [inputs] tab controls audio output level.
 https://twitter.com/ebijun/status/1395184397599469568

- audio CD with wavpack
 Encode: 
   On Windows: Exact Audio Copy & foobar2000
   On pkgsrc:
   pkg_add abcde; pkg_add glyr
   abcde -d /dev/rcd0a -B -o wv -1 -a default,cue
   XXX: can't see each tracks with qmmp.
 Play: 
  qmmp: can play wavpack file.
   Setting->Output->OSS plugin(liboss.so)

- touchpad: sometimes cursor far away.
- audio0 input issue
  http://mail-index.netbsd.org/port-arm/2021/02/22/msg007185.html
  "Is audio input from the inbuilt microphone(s) working?  I get "read failed:
  Resource temporarily unavailable" from audiorecord"
  audio0(ausoc1): trigger_input failed: errno=5
  audio0(audoc1): device timeout

pkgsrc:
- works : inkscape,scribus,seamonkey,minitube,mikutter,xournalpp,libreoffice

- firefox 88.0.1 and libreoffce 7.1.3.2 on NetBSD 9.99.82/aarch64 on pinebook.
 https://twitter.com/ebijun/status/1394599344611807242

 zoom meeting with firefox on NetBSD/aarch64 on pinebook pro 
  with UserAgent switcher addon as Linux.
 Send: Share Screen,camera/USB Camera
 Problem: Can"t show others screen/in-camera.
- LibreOffice 7.1.2.2 works fine.
 https://twitter.com/ebijun/status/1382306151027548161

- nono: luna68k/luna88k emulator
 add /etc/mk.conf
  ACCEPTABLE_LICENSES= nono-license
 cd /usr/pkgsrc/emulators/nono;make ;make package-install
- search soumd mixer GUI to manage mixerctl
 
ToDo:
- 3D acceleration

- Pinebook Pro 
 mate/xfce4/camera/WiFi
 ToDo:  
 - HDMI output via USB-C 
 - Audio output: can't switch speaker & headphone out

- Pinebook
 mate/xfce4/camera/HDMI
 ToDo:
 - internal WiFi

System Updates:

pkgsrc packages:
 http://cdn.netbsd.org/pub/NetBSD/misc/jun/aarch64/aarch64/2021-1/

sysinfo:
 NetBSD-9.99.85 sh-20181212-20210620002529Z
 userland-NetBSD-9.99.85/evbarm

pkgsrc:
 GConf-3.2.3nb10 ImageMagick-7.0.11.14 ImageMagick6-6.9.11.7nb9
 a2ps-4.14nb14 alsa-lib-1.2.4 ap24-php74-7.4.20nb6
 apache-2.4.48 aspell-0.60.8nb3 atkmm-2.28.1nb1
 atril-1.24.0nb11 autoconf-2.71nb1 autoconf213-2.13nb10
 autogen-5.18.16nb4 automake-1.16.3nb1 bash-5.1.8nb2
 bison-3.7.6nb1 cairo-1.16.0nb4 cairomm-1.14.2nb1
 caja-1.24.0nb5 caja-extensions-1.24.0nb6 clang-10.0.1nb4
 cmake-3.20.4 compface-1.5.2nb10 consolekit-1.2.2nb1
 coreutils-8.32nb1 curl-7.77.0 cyrus-sasl-2.1.27nb2
 dav1d-0.9.0 deforaos-pdfviewer-0.1.0nb11 dillo-3.0.5nb10
 docbook-xsl-1.79.2nb5 dos2unix-7.4.2nb1 dvipdfmx-20210318
 dvipsk-2021.1 editline-3.1.20210419nb1 eom-1.24.0nb7
 extra-cmake-modules-5.81.0 fd-3.01bnb1 ffmpeg2-2.8.17nb10
 ffmpeg3-3.4.8nb11 ffmpeg4-4.4nb6 fftw-3.3.9nb8
 firefox-88.0.1nb2 firefox-l10n-88.0.1nb1 fltk-1.3.6
 fluidsynth-2.2.1 fossil-2.15.2 gcc10-10.3.0nb1
 gcc8-8.4.0nb5 gconfmm-2.28.3nb27 gcr-3.38.0nb2
 gd-2.3.2nb1 gdbus-codegen-2.68.2 gdl-3.34.0nb8
 gedit-3.36.2nb6 gettext-tools-0.21nb2 ghostscript-agpl-9.54.0
 gimp-2.10.24nb9 git-base-2.32.0 glib2-2.68.2
 glib2-tools-2.68.2 glibmm-2.66.0nb2 gmake-4.3nb2
 gnome-desktop-2.32.1nb46 gnome-icon-theme-3.12.0nb7
 gnome-icon-theme-symbolic-3.12.0nb15 gnome-mime-data-2.18.0nb10
 gnutls-3.7.2 go-1.16.5 go-bin-1.14.2nb3 go115-1.15.13nb1
 go116-1.16.5nb1 graphviz-2.44.1nb15 gsed-4.8nb1
 gsftopkk-1.19.2nb12 gsl-2.6 gst-plugins0.10-base-0.10.36nb18
 gst-plugins1-base-1.16.2nb6 gstreamer0.10-0.10.36nb17
 gstreamer1-1.16.2nb3 gtk-doc-1.32nb6 gtk2+-2.24.33nb2
 gtk3+-3.24.29nb1 gtkmm-2.24.5nb14 gtkmm3-3.24.5
 gtksourceview2-2.10.5nb43 hal-info-20091130nb9
 help2man-1.48.3nb1 hunspell-1.7.0nb5 hyphen-2.8.8nb4
 icon-naming-utils-0.8.90nb9 inkscape-1.0.2nb7 intltool-0.51.0nb6
 jemalloc-5.2.1nb3 jwm-2.3.7nb12 kpathsea-6.3.3
 latexmk-463bnb3 lcms2-2.12 ldb-2.3.0nb1 libLLVM-9.0.1nb1
 libabw-0.1.3nb8 libaom-1.0.0nb4 libass-0.15.1
 libcdio-2.1.0nb4 libcdio-paranoia-2.0.1nb2 libcroco-0.6.13nb4
 libdvdnav-6.1.1 libdvdread-6.1.2 libetonyek-0.1.10
 libffi-3.3nb5 libfreehand-0.1.2nb9 libgtop-2.28.4nb19
 libheif-1.12.0 libical-3.0.10nb2 libidn-1.37nb1
 libidn2-2.3.1 libimagequant-2.15.1 libmwaw-0.3.18
 libogg-1.3.5 libpurple-2.14.4nb1 libreoffice-7.1.3.2nb2
 libsigc++-2.10.6nb2 libtasn1-4.17.0 libtool-base-2.4.6nb3
 libupnp-1.14.7 libvisio-0.1.7nb11 libvpx-1.10.0nb1
 libwpg-0.3.3nb5 libxkbcommon-1.3.0 libxml2-2.9.12
 libxslt-1.1.34nb6 libzip-1.7.3nb3 lintpkgsrc-4.96nb1
 llvm-10.0.1nb4 luatex-1.13.0 makeindexk-2.15nb13
 makejvf-20200412 marco-1.24.2 mate-calc-1.24.2
 mate-media-1.24.0nb5 mate-panel-1.24.2 mate-screensaver-1.24.2
 mate-session-manager-1.24.3 mate-terminal-1.24.1nb1
 medit-1.2.0nb18 mendexk-3.3 meson-0.58.1 mkvtoolnix-58.0.0
 mm-common-1.0.3 mozjs78-78.4.0nb3 mpg123-1.28.0
 mpich-3.2.1nb6 mpv-0.33.1nb3 mupdf-1.18.0nb2
 mysql-client-5.7.34nb1 mythes-1.2.4nb2 nasm-2.15.05nb1
 ncurses-6.2nb3 neon-0.31.2nb2 netpbm-10.79.04nb8
 nettle-3.7.3 nginx-1.20.1 nkf-2.15nb3 nodejs-14.17.0
 nspr-4.31 nss-3.66 osabi-NetBSD-9.99.85 oxygen-icons-5.81.0
 p11-kit-0.24.0 p5-Archive-Zip-1.68nb1 p5-Authen-SASL-2.16nb9
 p5-Business-ISBN-3.005nb1 p5-Business-ISBN-Data-20191107nb1
 p5-CDDB_get-2.28nb10 p5-Digest-HMAC-1.04nb11 p5-Email-Valid-1.202nb5
 p5-Error-0.17029nb2 p5-ExtUtils-Depends-0.8000nb2
 p5-ExtUtils-PkgConfig-1.16nb5 p5-File-Slurp-Tiny-0.004nb6
 p5-GSSAPI-0.28nb12 p5-IO-CaptureOutput-1.1105nb2
 p5-IO-Socket-INET6-2.72nb7 p5-IO-Socket-SSL-2.070nb1
 p5-Locale-libintl-1.32nb1 p5-MP3-Info-1.26nb4
 p5-MailTools-2.21nb2 p5-Module-Build-0.42310nb2
 p5-Mozilla-CA-20200520nb1 p5-Net-3.13nb1
 p5-Net-DNS-1.30nb1 p5-Net-Domain-TLD-1.75nb5
 p5-Net-IP-1.26nb9 p5-Net-LibIDN-0.12nb13
 p5-Net-SMTP-SSL-1.04nb5 p5-Net-SSLeay-1.90nb1
 p5-Parse-Yapp-1.21nb4 p5-SUPER-1.20190531nb2
 p5-Scalar-List-Utils-1.56nb1 p5-Socket6-0.29nb3
 p5-Sub-Identify-0.14nb5 p5-Sub-Uplevel-0.2800nb5
 p5-Test-Exception-0.43nb6 p5-Test-Needs-0.002006nb3
 p5-Test-NoWarnings-1.04nb12 p5-Test-Warn-0.36nb4
 p5-TimeDate-2.33nb1 p5-Tree-DAG_Node-1.31nb4
 p5-URI-5.09nb1 p5-XML-NamespaceSupport-1.12nb5
 p5-XML-Parser-2.46nb1 p5-XML-SAX-1.02nb1
 p5-XML-SAX-Base-1.09nb5 p5-XML-SAX-Expat-0.51nb7
 p5-XML-Simple-2.25nb4 p5-gettext-1.07nb6
 p5-glib2-1.3293nb1 p5-inc-latest-0.500nb6
 pangomm-2.46.0nb1 pcre2-10.37 perl-5.34.0nb2
 php-7.4.20 php74-curl-7.4.20nb10 php74-fpm-7.4.20nb6
 php74-gd-7.4.20nb1 php74-iconv-7.4.20 php74-intl-7.4.20nb6
 php74-json-7.4.20 php74-mbstring-7.4.20 php74-owncloud-10.6.0nb1
 php74-pdo-7.4.20 php74-pdo_sqlite-7.4.20nb6 php74-posix-7.4.20
 php74-sqlite3-7.4.20nb6 php74-zip-7.4.20nb5 php74-zlib-7.4.20nb1
 pkg_rolling-replace-0.24.12 pkgconf-1.7.4nb1 pkgdepgraph-2.8nb10
 pkgdiff-1.9nb2 pkgin-20.12.1nb1 pluma-1.24.2nb3
 png-1.6.37nb1 policykit-0.9nb29 polkit-0.119
 poppler-21.06.1 poppler-cpp-21.06.1 poppler-glib-21.06.1
 poppler-includes-21.06.1 protobuf-3.17.3 psutils-1.17nb11
 ptexenc-1.3.9 pulseaudio-14.2nb3 py27-typing-3.10.0.0
 py38-babel-2.9.1 py38-cElementTree-3.8.10 py38-cairo-1.20.1
 py38-certifi-2021.5.30 py38-ecdsa-0.17.0 py38-expat-3.8.10
 py38-libxml2-2.9.12nb1 py38-more-itertools-8.8.0 py38-pygments-2.9.0
 py38-setuptools-56.0.0 py38-six-1.16.0 py38-sqlite3-3.8.10nb19
 py38-urllib3-1.26.5 python38-3.8.10nb1 qalculate-3.5.0nb10
 qmmp-1.5.0 qt4-libs-4.8.7nb26 qt4-qdbus-4.8.7nb6
 qt4-tools-4.8.7nb7 qt5-qtbase-5.15.2nb5 rclone-1.55.0nb2
 redland-1.0.17nb29 rip-1.07nb9 ruby26-gettext-3.3.8
 ruby26-moneta-1.4.2 ruby26-oauth-0.5.6 ruby26-pkg-config-1.4.6
 ruby26-red-colors-0.2.0 ruby26-red-datasets-0.1.2
 ruby26-zip-2.3.0 rust-1.52.1nb4 samba-4.14.5 scim-1.4.17nb1
 scribus-1.4.8nb8 seamonkey-2.53.6nb4 speex-1.2.0nb1
 strigi-0.7.8nb42 sudo-1.9.7p1 swig-1.3.38nb3 tcsh-6.22.02nb2
 tex-babel-3.60 tex-cjk-gs-integrate-20201206.0nb1
 tex-csquotes-5.2l tex-graphics-def-2021 tex-hyperref-7.00k
 tex-hyph-utf8-2021 tex-hyphen-base-2021 tex-japanese-otf-1.7b8.57826
 tex-knuth-lib-2021 tex-knuth-local-2021 tex-kpathsea-2021
 tex-l3backend-2021 tex-l3kernel-2021 tex-l3packages-2021
 tex-latex-base-dev-20211201pre0 tex-latex-firstaid-dev-1.0l
 tex-lm-2.005 tex-lualibs-2.74 tex-luaotfload-3.18
 tex-luatex-1.13.0 tex-metafont-2021 tex-parskip-2.0h
 tex-plain-3.141592653.57963 tex-platex-2021 tex-plautopatch-0.9n
 tex-ptex-fontmaps-20201227.0nb1 tex-pxjahyper-0.7 tex-tex-3.141592653
 tex-texlive-scripts-2021 tex-texlive-scripts-doc-2021
 tex-texlive.infra-2021 tex-tlshell-2021 texi2html-5.0nb10
 texlive-collection-basic-2021 upmendex-0.55 vala-0.52.4
 vte3-0.60.3nb10 w3m-0.5.3.0.20210102nb1 web2c-2021
 wget-1.21.1nb2 wxGTK30-3.0.5.1nb3 x264-devel-20191217nb2
 xdvik-22.87.04nb1 xfce4-conf-4.14.3nb3 xfce4-desktop-4.14.4
 xfce4-exo-0.12.11nb5 xfce4-terminal-0.8.10 xfce4-thunar-1.8.17
 xfce4-tumbler-0.3.0nb10 xfce4-xarchiver-0.5.4.16nb1
 xscreensaver-5.45nb4 xterm-368 youtube-dl-20210606
 zenity-3.32.0nb1 zstd-1.5.0

- mate
  pkgsrc/devel/libappindicator depends on py27-gtk2
- asunder
  cdparanoia reading failed hangs on startup
- pdfpc: testing failed

System Updates:
http://cvsweb.netbsd.org/bsdweb.cgi/src/distrib/sets/lists/base/shl.mi

Tips:
- System Clocks
 % sysctl -a |grep freq

 Install pkgsrc/sysutils/estd from pkgsrc and start it on bootup 
 for automatic up-/downscaling.

pinebook:
 machdep.cpufreq.cpu0.available = 1152 1104 1008 816 648 408
 # sysctl -w machdep.cpufreq.cpu0.target=1152

pinebook-pro:
 machdep.cpufreq.cpu0.available = 1416 1200 1008 816 600 408
 machdep.cpufreq.cpu4.available = 2000 1800 1608 1416 1200 1008 816 600 408
 # sysctl -w machdep.cpufreq.cpu0.target=1416
 # sysctl -w machdep.cpufreq.cpu4.target=2000

- Battery Status
  envstat 
  xbattbar
XXX: link from dbus or mate-power-manager? 

- HDMI port works on pinebook.
 Connect display to pinebook HDMI port
 # pkg_add arandr
 % arandr

- mate: pkgsrc/meta-pkgs/mate
 https://twitter.com/ebijun/status/1086814579647102976
 pkg_add mate
 echo "mate-session" >> .xinitrc
 startx

- ibus 
 export XMODIFIERS=@im=ibus

- Add eDP transmitter and enable display pipeline
 http://mail-index.netbsd.org/source-changes/2019/02/03/msg103047.html
 arandr works well: display up-side down
 https://twitter.com/ebijun/status/1092885154127724544

- keymapping: [Shift][<>] on 11inch
 https://wiki.netbsd.org/ports/evbarm/allwinner/#index3h2

- replace AC Adapter for heavy load
 Anker PowerPort10 A2133+USB DC Cable with 3.5mm/1.35mm connecter
 USB-C laptop charger from HP

- USB Wifi: urtwn0/run0 works 
 urtwn0: I-O DATA DEVICE, INC. (0x4bb) WN-G150UM (0x94c)
 pinebook: internal Wi-Fi not supported
 pinebook pro: internal bwfm0 works,sometimes hangs


Version: 
 NetBSD 9.99.85 (GENERIC64) #0: Sun Jun 20 00:25:29 UTC 2021  mkrepro@mkrepro.NetBSD.org:/usr/src/sys/arch/evbarm/compile/GENERIC64

dmesg:
 https://github.com/ebijun/NetBSD/blob/master/dmesg/aarch64/pinebook
 https://github.com/ebijun/NetBSD/blob/master/dmesg/aarch64/pinebook-pro

System image: dd to eMMC.
 http://www.invisible.ca/arm/

 pinebook-pro:
 1. Insert microSD, boot (Linux from eMMC comes up), 
 2. hit "Restart", 
 3. It will boot from microSD. 
 4. dd'ing to eMMC for installation, the eMMC is faster
- eMMC can disable with switch inside,and boot MicroSD.

 Getting Started with NetBSD on the Pinebook Pro by Benny Siegert 
 https://bentsukun.ch/posts/pinebook-pro-netbsd/

sysinfo:
 https://github.com/ebijun/NetBSD/blob/master/pinebook/Update/sysinfo

pkginfo:
 https://github.com/ebijun/NetBSD/blob/master/pinebook/Update/pkginfo

pkgchk.conf:
 https://github.com/ebijun/NetBSD/blob/master/pinebook/Update/pkgchk.conf
  cp pkgchk.conf /usr/pkgsrc;pkg_add pkg_chk; pkg_chk -au

--
Jun Ebihara
